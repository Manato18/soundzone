実機検証項目

  1. 認証フロー検証

  1.1 新規登録フロー

  - SignUpScreenでメールアドレス・パスワードを入力 OK
  - パスワード強度チェック（大文字・小文字・数字を含む8文字以上）が機
  能する
  - パスワード確認が一致しない場合のエラー表示 OK
  - 登録ボタン押下後、EmailVerificationScreenに遷移する OK
  - メールアドレスにOTPコードが送信される OK
  - OTPコード入力後、自動的に検証が開始される OK
  - OTP検証成功後、ProfileCreationScreenに自動遷移する OK
  - ネットワークエラー時の適切なエラーメッセージ表示 OK

  1.2 ログインフロー

  - LoginScreenでメールアドレス・パスワードを入力 OK
  - ログイン失敗時のエラーメッセージ表示 OK
  - レート制限（5回失敗で15分ロック）が機能する
  - ロックアウト時のカウントダウン表示
  - メール未認証アカウントの場合、EmailVerificationScreenに遷移 OK
  - 認証済みアカウントの場合、適切な画面に遷移 OK

  1.3 OTP検証

  - 6桁の数字入力時の自動フォーカス移動 OK
  - バックスペースでの前フィールドへの移動 OK
  - 6桁入力完了時の自動検証開始 OK
  - OTP再送信のクールダウンタイマー（60秒） OK
  - 無効なOTPコードのエラー表示 OK
  - 「入力内容をクリア」ボタンの動作 OK

  2. プロフィール作成フロー検証

  2.1 フォーム入力

  - 表示名の入力（最大30文字） OK
  - 自己紹介の入力（最大300文字） OK(supabaseもok)
  - 文字数カウンターの表示と更新 OK
  - 必須項目の検証（表示名は必須） OK(画像必須にしているのを解除する)
  - 入力中に画面を離れても値が保持される OK(バックグラウンドに移動して戻っても表示されている)

  2.2 画像選択機能

  - 「アバター画像を選択」ボタンが表示される OK
  - ギャラリーから画像を選択できる OK
  - 選択した画像のプレビューが即座に表示される OK
  - 画像を再選択すると新しい画像に更新される OK
  - 画像選択後もフォームの値が保持される OK
  - 画像なしでもプロフィール作成が可能 OK

  2.3 プロフィール作成

  - 「プロフィールを作成」ボタンの押下 OK
  - 作成中のローディング表示 OK
  - エラー時の適切なメッセージ表示 OK(ネットワークエラーは表示された)
  - 成功時のアラート表示 OK
  - プロフィール作成成功後、メイン画面（地図）に遷移 OK

  3. 状態管理の検証

  3.1 フォーム状態の永続性

  - アプリをバックグラウンドに移動しても入力値が保持される
  - 画面遷移しても入力値が保持される
  - プロフィール作成成功時のみフォームがクリアされる

  3.2 認証状態の同期

  - ログイン後、全画面で認証状態が反映される
  - ログアウト後、認証が必要な画面からLoginScreenに遷移
  - アプリ再起動時のセッション復元

  4. エラーハンドリング検証

  4.1 ネットワークエラー

  - オフライン時の適切なエラーメッセージ
  - タイムアウト時のエラーメッセージ（30秒）
  - 「設定を開く」ボタンでネットワーク設定画面へ遷移

  4.2 API エラー

  - 409エラー（既存アカウント）の表示
  - 400エラー（無効なデータ）の表示
  - 500エラー（サーバーエラー）の表示

  5. パフォーマンス検証

  5.1 レンダリング最適化

  - フォーム入力時に不要な再レンダリングが発生しない OK
  - 画像選択時に画面がちらつかない OK
  - スムーズなキーボード入力が可能 OK

  5.2 メモリ使用量

  - 大きな画像を選択してもメモリリークが発生しない
  - 画面遷移を繰り返してもメモリ使用量が増加し続けない

  6. UI/UX検証

  6.1 キーボード動作

  - キーボード表示時に入力フィールドが隠れない
  - キーボードの開閉がスムーズ
  - 適切なキーボードタイプの表示（メール、数字）

  6.2 ローディング状態

  - 各種操作時の適切なローディング表示
  - ローディング中の操作無効化
  - エラー後の適切な状態復帰

  7. デバッグログの確認

  開発ビルドで以下のログが出力されることを確認：
  - [RootNavigator] Auth state: - 認証状態の変更
  - [AuthStateManager] Syncing auth state - 認証同期
  - [AuthService] verifyOTP response - OTP検証結果
  - [EmailVerificationScreen] OTP verification - OTP検証フロー
  - [InnerNavigator] State: - プロフィール確認状態

  8. エッジケース検証

  - アプリ起動直後の認証状態確認
  - 複数回の高速タップによる重複送信防止
  - 長時間放置後のセッション有効性
  - バックグラウンドからの復帰時の状態確認
  - 低速ネットワーク環境での動作

  これらの検証項目をすべて確認することで、リファクタリング後のコードが
  正しく動作していることを確証できます。