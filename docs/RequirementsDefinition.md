## 1. ドキュメント概要

- **なぜ必要か**・**何を書くか**・**どのように書くか**
    - **なぜ必要か**：要件定義書のバージョン管理や責任者を明確にし、後から参照しやすくするため。
    - **何を書くか**：ドキュメント名、作成日／作成者、バージョン、目的を簡潔に。
    - **どのように書くか**：1〜２行の文章で「この要件定義書は◯◯のために作成しました」と目的を明示し、日付と担当者を表記。
- **ドキュメント名**：SoundZone 要件定義書
- **作成日**：2025/07/04
- **作成者**：谷口
- **バージョン**：1
- **目的**：本ドキュメントは、SoundZone の開発に必要な機能要件・非機能要件・制約条件を明確化し、開発チームとステークホルダー間で共通認識を形成するための基盤とする 。

---

## 2. プロジェクト背景・ゴール

- **なぜ必要か**・**何を書くか**・**どのように書くか**
    - **なぜ必要か**：なぜこのアプリを作るのか全員の理解を統一し、開発の判断基準（KPI）を決めるため。
    - **何を書くか**：現状抱えている課題、解決したい問題、達成したいビジネス目標や数値目標。
    - **どのように書くか**：
        1. 「現状：…なので」
        2. 「課題：…が不足している」
        3. 「ゴール：…を実現し、DAU〇〇％増加」
            
            の順で簡潔に記載。
            

### **デジタル社会における孤独の逆説**

**デジタル接続と実体験の乖離**

現代社会では、スマートフォンやソーシャルメディアの普及により、人々は常に「つながっている」状態。しかし、皮肉なことに、デジタル接続の増加と比例して個人の孤独感も深まっている。2020年代に入り、この「デジタル孤独」は世界的な社会課題として認識されるようになった。

**孤独の現状**

- **SNS利用と孤独の相関**: 研究によれば、ソーシャルメディアの利用時間が長いほど、実際の孤独感が高まる傾向がある
- **若年層の孤独**: デジタルネイティブ世代ほど、リアルな人間関係の構築に困難を感じる割合が高い
- **都市部での孤立**: 特に都市部では、物理的に人が密集しているにも関わらず、コミュニティ意識の希薄化が進行

**デジタル孤独の要因**

1. **浅いつながり**: オンラインでの交流は数多くあっても、その多くが表層的
2. **場所性の喪失**: デジタル空間では「どこにいるか」という文脈が失われる
3. **体験の個人化**: 同じ場所にいても、各自がスマホ画面を見る「一緒にいるけど一緒にいない」状態
4. **アルゴリズムの泡**: 似た価値観の人とだけ繋がり、多様な出会いが減少

### **SoundZoneによる孤独解消の可能性**

**1. 場所を軸にした実体験の復権**

- **リアルな移動の動機づけ**: 音を聴くために実際に場所を訪れる理由を創出
- **共通体験の創出**: 同じ場所で同じ音を聴くという共有体験
- **デジタルとリアルの融合**: オンラインで知り、オフラインで体験するという新しい行動パターン

**2. 声による人間的つながり**

- **音声の親密性**: テキストや画像と異なり、声には感情や個性が直接反映される
- **MyPin機能の近接性**: 物理的に近い人とだけ音声を共有する特性が、意図的な出会いを生む
- **声の記憶**: 人の声は強い記憶として残り、つながりの感覚を強化する

**3. コミュニティ形成の新たな形**

- **レイヤーによる関心共有**: 共通の興味を持つ人々が特定のレイヤーを通じてつながる
- **地域コミュニティの再構築**: 地域の音風景を共有することで、地域への愛着と住民間の絆を強化
- **世代間ギャップの橋渡し**: 高齢者の語りを若者が聴き、場所の記憶を継承する機会の創出

**4. 孤独感を軽減する具体的メカニズム**

- **偶発的な出会い**: すれ違いによる音声共有が、計画されていない自然な交流を生む
- **能動的参加の促進**: 音声を投稿する行為自体が、社会参加の一形態となる
- **場所への帰属意識**: 特定の場所に関連した音声体験が、その場所への帰属意識を高める

### **社会的インパクト：デジタル孤独からの脱却**

1. **リアルな移動と交流の復活**: 音を聴くという目的が、人々を実際の場所に導き、偶発的な出会いを創出
2. **声による人間的つながりの再構築**: 感情が伝わる音声を通じて、デジタル時代に失われつつある人間的温かみを取り戻す
3. **場所を軸にした新しいコミュニティ形成**: 地理的近接性と共通の関心を組み合わせた、新しい形のつながりを提供
4. **受動的消費から能動的参加へ**: 単にコンテンツを消費するだけでなく、自ら音声を残し、場所の記憶を作る主体性を促進

SoundZoneは、デジタル技術の利点を活かしながらも、人々を現実世界に引き戻し、真の意味での「つながり」を再構築するプラットフォームとする。テクノロジーが進化すればするほど深まる孤独という現代のパラドックスに対する、解決するためのプラットフォームを提供する。

- 小メモ
    
    # **SoundZone（音ピン）アプリが解決できる社会課題**
    
    ## **広域的な社会課題**
    
    **1. コミュニケーションの断絶**
    
    - **デジタル時代の孤独**: オンラインコミュニケーションが増える中で、実際の場所や体験を共有する機会が減少
    - **地域コミュニティの希薄化**: 都市化や個人主義の高まりにより、地域の繋がりが弱まっている
    - **世代間ギャップ**: 若者と高齢者の間で体験や記憶を共有する手段が限られている
    
    **2. 場所と記憶の消失**
    
    - **地域の歴史・文化の継承困難**: 口承や体験として伝えられてきた地域の記憶が失われつつある
    - **都市開発による景観変化**: 開発により変わっていく街の記憶が残りにくい
    - **災害による地域記憶の喪失**: 震災などで失われた場所の記憶を保存する手段の不足
    
    **3. 体験の均質化**
    
    - **観光体験の画一化**: 同じ観光スポットでも同じような体験しかできない
    - **情報の視覚偏重**: 現代社会では視覚情報が優先され、聴覚体験が軽視されている
    - **バーチャルとリアルの乖離**: オンライン体験とリアル体験の分断
    
    ## **中間的な課題領域**
    
    **1. 地域活性化の課題**
    
    - **観光資源の発掘・活用不足**: 地域の魅力が十分に伝わっていない
    - **地域の物語性の欠如**: 場所に関する背景や物語が伝わりにくい
    - **地域間交流の減少**: 異なる地域の人々が交流する機会の減少
    
    **2. 感覚体験の偏り**
    
    - **聴覚体験の軽視**: 視覚情報優先の社会で音の価値が見落とされている
    - **場所と音の切り離し**: 場所固有の音風景が認識されにくい
    - **感覚的記憶の共有困難**: 音や匂いなど非視覚的な記憶を共有する手段の不足
    
    **3. デジタルとリアルの分断**
    
    - **オンライン体験の限界**: 場所の本質的な体験がデジタルで再現しにくい
    - **リアル体験の動機付け不足**: 実際に場所を訪れる理由が減少している
    - **デジタルネイティブの現実接点減少**: 若年層のリアルな場所体験の機会減少
    
    ## **具体的に解決できる社会課題**
    
    **1. 地域の音風景・文化の保存と継承**
    
    - **消えゆく音の記録**: 都市化や環境変化で失われつつある地域固有の音風景を記録・保存
    - **口承文化のデジタル継承**: 語り部や地域の声を記録し、場所と紐づけて後世に残す
    - **災害復興と記憶の継承**: 被災地の「以前の音」を記録し、記憶を継承する手段を提供
    
    **2. 場所体験の多様化と深化**
    
    - **観光体験の個人化**: 同じ場所でも異なる音声ガイドで多様な体験を提供
    - **隠れた地域資源の発掘**: 地元の人だけが知る場所の魅力を音声で共有
    - **バリアフリーな情報提供**: 視覚障害者も含め、多様な人々に場所の情報を音声で届ける
    
    **3. リアルな交流と移動の促進**
    
    - **現地訪問の動機付け**: 音を聴くために実際に場所を訪れる理由を創出
    - **すれ違い体験の創出**: MyPin機能による物理的近接を活かした新しい出会いの形
    - **世代間・地域間交流**: 若者と高齢者が音声を通じて場所の記憶を共有
    
    **4. 感覚的体験の拡張**
    
    - **聴覚体験の再評価**: 視覚偏重社会で忘れられがちな「聴く」体験の価値向上
    - **マルチモーダルな記憶形成**: 場所と音を結びつけた豊かな記憶体験の創出
    - **感情と場所の結びつき強化**: 音声による感情表現で場所への愛着形成を促進
    
    ## **最終的な社会的インパクト**
    
    SoundZoneアプリは、「音×場所×体験」という新しい枠組みを通じて、特に以下の社会課題に対して具体的なソリューションを提供します：
    
    1. **地域文化・記憶の継承**: 消えゆく音風景や口承文化をデジタル保存し、場所と紐づけて継承
    2. **コミュニティ再構築**: 場所を軸にした新しい形の交流を促進し、地域や世代を超えた繋がりを創出
    3. **感覚体験の多様化**: 視覚偏重社会で軽視されがちな聴覚体験を再評価し、より豊かな場所体験を提供
    4. **リアルな移動と交流の促進**: デジタルとリアルの融合により、実際の場所訪問と人々の交流を動機付け
    
    1. 1. **地域文化・記憶の継承**: 消えゆく音風景や口承文化をデジタル保存し、場所と紐づけて継承
    2. 2. **コミュニティ再構築**: 場所を軸にした新しい形の交流を促進し、地域や世代を超えた繋がりを創出
    3. 3. **感覚体験の多様化**: 視覚偏重社会で軽視されがちな聴覚体験を再評価し、より豊かな場所体験を提供
    4. 4. **リアルな移動と交流の促進**: デジタルとリアルの融合により、実際の場所訪問と人々の交流を動機付け
    
    これらの課題解決を通じて、SoundZoneは単なるエンターテインメントアプリを超え、社会的価値を持つプラットフォームとして機能する可能性を秘めています。
    

### なぜSoundZoneを作る必要があるか

1. **新しい体験価値の創出**
    - **音と場所の結びつき**: 従来のSNSは視覚情報（テキスト・画像）が中心だが、このアプリは「音」という新たな感覚を「地図上の体験」と結びつけている。
    - **リアルな空間体験の促進**: 現地に近づかないと音が聞けない仕組みにより、実際に場所を訪れる動機付けとなる。

**2. コミュニティ形成の新たな形**

- **テーマ別のレイヤー機能**: ユーザーが自由にレイヤー（テーマ）を作成でき、共通の興味を持つ人々がつながれる。
- **参加型の音の世界づくり**: 誰でも自由に音声を投稿でき、ユーザー共同で「音ある世界」を作り上げていく。

**3. 場所の新たな価値発見**

- **場所に紐づく音の記録**: 観光地の解説、自然音、街の音など、場所に関連する音声情報を残すことができる。
- **現地ならではの体験共有**: その場所に実際に訪れたときにしか味わえない、現地の空気感やストーリーを音声で共有できる。

**4. 多様な用途の可能性**

- **観光案内**: 観光地での音声ガイド
- **音日記**: 思い出の場所に音声メモを残す個人的な記録
- **ASMR**: リラックスできる自然音や環境音の共有
- **街の音**: 都市の音風景の記録と共有
1. **MyPin機能による新たなコミュニケーション形態**
    - **すれ違い通知機能**: ユーザーがレイヤーごとに登録した音声が、すれ違った他のユーザーに届く仕組み
    - **個人の音声アイデンティティ**: お気に入りの5つのレイヤーそれぞれに自分の音声を登録でき、自己表現の新たな手段となる。
    - **生活に色を持たせる**: 毎日同じ繰り返しの中で今までは出会うことがなかった人々を、遠距離ではなく生活範囲で出会わせることができる。

---

## 3. スコープ定義

- **なぜ必要か**・**何を書くか**・**どのように書くか**
    - **なぜ必要か**：開発対象の機能範囲を明確にし、時間やコストのオーバーを防ぐため。
    - **何を書くか**：
        - **In-Scope**：必ず作る機能（例：投稿、地図表示など）
        - **Out-Of-Scope**：対象外の機能（例：決済、動画配信）
    - **どのように書くか**：表形式で機能をリスト化し、各項目に簡単な説明を付ける。

### **1. 基本機能**

**地図・位置情報**

- ユーザーの現在位置を中心とした地図表示
- 地図上での音声ピン(投稿ピン)の視覚的表示
- 距離フィルター（10m以内のピンのみタップ可能）
- 現在地ボタンによる地図の再センタリング

**音声機能**

- 音声録音機能（録音ボタンから遷移）
- 録音した音声の再生・再録音
- 音声付きピンの再生

**ユーザー管理**

- ユーザー登録・ログイン機能
- プロフィール編集機能
- アカウント設定画面

### **2. コンテンツ管理**

**投稿機能**

- 音声投稿（位置情報付き）
- タイトル設定（投稿時）
- テキスト編集（100文字以内）

**インタラクション機能**

- 投稿へのいいね機能
- 投稿へのコメント機能
- コメントへのいいね機能

### **3. レイヤー機能**

**レイヤー管理**

- レイヤー名設定
- レイヤー説明（最大200文字）
- レイヤーのカテゴリー設定（複数選択可）
- レイヤーのガイドライン設定（最大200文字）
- レイヤーの公開/非公開設定
- レイヤーへの画像設定（任意1枚）

**レイヤー利用**

- レイヤー選択による投稿フィルタリング
- レイヤーのお気に入り登録

### **4. UI/UX要素**

### **5. 技術要件**

**プラットフォーム**

- iOS/Android両対応
- React Native によるクロスプラットフォーム開発

**バックエンド**

- Supabase（認証、データベース、ストレージ）
- iPhoneだとApple map、AndroidだとGoogle Maps SDK（地図表示）

**パフォーマンス**

- 1秒以内の画面遷移
- OAuth認証、データ暗号化によるセキュリティ確保

### **注：初期段階では対象外（Out of Scope）**

- MyPin機能（将来実装予定の新機能）
    - ユーザーがレイヤーごとに音声を登録し、すれ違った他ユーザーに音声が届く機能
    - お気に入りレイヤーを登録しているユーザーのみに通知

---

## 5. 用語定義

- **なぜ必要か**・**何を書くか**・**どのように書くか**
    - **なぜ必要か**：ドキュメント内で使う専門用語や固有名詞の意味を統一し、誤解をなくすため。
    - **何を書くか**：SoundPin、Layer、ユーザー状態などのキーワードと短い定義。
    - **どのように書くか**：箇条書きで「用語：定義」の形式で記載。
- **SoundPin**：地図上に投稿される「音声＋位置情報＋メタデータ」の単位
- **Layer**：投稿をカテゴライズするラベル
- **ユーザー状態**：未認証／認証済み／フォロー中 など

---

## 6. ペルソナ・ユーザーストーリー

- **なぜ必要か**・**何を書くか**・**どのように書くか**
    - **なぜ必要か**：想定ユーザーとその行動を具体化し、機能の優先度や設計判断の根拠にするため。
    - **何を書くか**：
        - **ペルソナ**：年齢・職業・行動パターン・利用シーンなど
        - **ユーザーストーリー**：「〜として、〜したい、〜なので」形式のシナリオと優先度
    - **どのように書くか**：
        1. ペルソナは「名前／属性／ニーズ」を簡潔にプロファイル化
        2. ストーリーは表にしてID・ストーリー文・優先度を記入

| ペルソナ名 | 属性 | ニーズ | 行動パターン | 利用シーン |
| --- | --- | --- | --- | --- |
| **音楽探索者：田中健太** | 28歳・ITエンジニア・都市部在住 | 日常の中で新しい音の発見と共有を楽しみたい | 通勤時や週末の散歩中に音に敏感で、面白い音を見つけると記録する | 都市の隠れた音風景を発見・共有し、自分だけの音のコレクションを作る |
| **旅行好き：佐藤美咲** | 32歳・フリーランスデザイナー・旅行愛好家 | 訪れた場所の雰囲気を音で記録し、思い出として残したい | 月に1–2回旅行に出かけ、その土地ならではの音風景を探す | 旅先での祭りの音や自然音を録音し、位置情報と共に保存 |
| **地域活動家：山田誠** | 35歳・地域NPO職員・コミュニティ形成に熱心 | 地域の特色ある音を集め、地域の魅力を発信したい | 地域イベントの企画・運営に携わり、地域の歴史や文化に詳しい | 地域の歴史スポットや名所に解説音声を残し、観光客や住民に共有 |

| ID | ユーザーストーリー | 優先度 |
| --- | --- | --- |
| **US-01** | 旅行好きとして、訪れた場所の感想を録音し位置情報と共に保存したい。そうすることで、後から思い出を音で振り返ることができるため。 | 高 |
| **US-02** | 音楽探索者として、自分が発見した面白い音を地図上に投稿したい。そうすることで、他の人と音の発見を共有できるため。 | 高 |
| **US-03** | 地域活動家として、地域の歴史スポットに解説音声を残したい。そうすることで、観光客や地域住民に地域の魅力を伝えられるため。 | 中 |
| **US-04** | 音楽探索者として、他のユーザーが投稿した音声を地図上で探し、聴きたい。そうすることで、新しい音の発見や場所の雰囲気を味わえるため。 | 高 |
| **US-05** | アプリユーザーとして、興味のあるテーマごとにレイヤーを作成・選択したい。そうすることで、特定のテーマに関連する音声だけを効率的に探せるため。 | 中 |
| **US-06** | アプリユーザーとして、気に入った音声投稿にいいねやコメントをしたい。そうすることで、投稿者とコミュニケーションを取り、感想を伝えられるため。 | 中 |
| **US-07** | 旅行好きとして、訪れる予定の場所の音声投稿を事前に確認したい。そうすることで、その場所の雰囲気を事前に知ることができるため。 | 低 |
| **US-08** | 地域活動家として、自分が作成したレイヤーに他のユーザーが投稿した音声を確認したい。そうすることで、地域の音の記録が充実していくのを見られるため。 | 中 |
| **US-09** | アプリユーザーとして、自分のプロフィールを編集し、投稿した音声を管理したい。そうすることで、自分の活動履歴を整理できるため。 | 低 |
| **US-10** | 音楽探索者として、現在地から一定距離内にある音声投稿だけを表示したい。そうすることで、今いる場所の音の風景に集中できるため。 | 高 |

MyPinの方に関してはまだ書けていない。

- ペルソナとユーザーストーリーの評価
    
    以下、ユーザーストーリー全体についての評価です。
    
    ---
    
    ## ① 網羅性・カバレッジ
    
    - **カバーできている領域**
        - 発見（US-02, US-04, US-10）
        - 投稿（US-01, US-03）
        - フィルタリング／テーマ分け（US-05, US-08）
        - 交流（US-06）
        - プロフィール管理（US-09）
    - **不足している領域**
        - フォロー／アンフォロー（フォロー後のストーリーはあるが、アクション自体がない）
        - 通知／プッシュ（新着音声やコメントを知らせる）
        - 投稿の編集・削除
        - オフライン時の閲覧・同期
        - 外部共有（SNS連携やURLシェア）
    
    ---
    
    ## ② 優先度設定の妥当性
    
    - **高優先度**（US-01, US-02, US-04, US-10）
        
        → MVP に必要な「発見・投稿・閲覧・距離フィルタ」が正しく選定されている
        
    - **中優先度**（US-03, US-05, US-06, US-08）
        
        → コア体験を補強する機能として適切
        
    - **低優先度**（US-07, US-09）
        
        → 思い出振り返り・プロフィール管理は後工程で良い
        
    
    ---
    
    ## ③ INVEST 原則との適合
    
    | 原則 | 良い点 | 改善ポイント |
    | --- | --- | --- |
    | Independent（独立性） | ほとんど独立しており、並行開発が可能 | US-06 は「いいね＋コメント」が一体化しており独立性が低い |
    | Negotiable（交渉可能） | ストーリー文が“なぜ”を含みつつ柔軟性もある | — |
    | Valuable（価値提供） | 各ストーリーにユーザー価値が明確に示されている | — |
    | Estimable（見積可能） | 大枠は見積りやすい | US-08（レイヤー内確認）は前提条件が曖昧で見積り難 |
    | Small（小粒） | ほとんど小粒で短期間実装可能 | US-05（作成＋選択）と US-06 は粒度を細かく分割するとより良い |
    | Testable（テスト可能） | シナリオに沿った受入条件が想像しやすい | 各ストーリーに具体的な受入基準（AC）を追加するとテストしやすくなる |
    
    ---
    
    ## ④ 重複・整理ポイント
    
    - **US-06**（いいね＋コメント）→ 2 つに分割
    - **US-05**（レイヤー作成＋選択）→ 作成／選択それぞれのストーリーに分割
    - **US-08** は US-04（他ユーザー投稿の閲覧）と近く、用途を整理 or 統合検討
    
    ---
    
    ## ⑤ 改善の方向性
    
    1. **粒度細分化**
        - US-05 → 「レイヤー作成」「レイヤー選択」
        - US-06 → 「いいね」「コメント」
    2. **抜けストーリーの追加**
        - フォロー／アンフォロー機能
        - 通知（新着音声／コメント）
        - 投稿編集・削除
        - オフライン閲覧／同期
        - SNSシェア
    
    ---
    
    これらを整理・追加することで、より **安定性の高い見積り** と **テスト可能な小粒ストーリー** が揃い、開発の効率化と品質担保が一層進みます。
    

---

## 7. 機能要件

- **なぜ必要か**・**何を書くか**・**どのように書くか**
    - **なぜ必要か**：システムが提供すべき具体的な機能を開発チーム全員で共有し、受入基準を明確にするため。
    - **何を書くか**：機能ID、機能名、概要説明、優先度、受入基準（完成を判断する条件）。
    - **どのように書くか**：表形式で行ごとに `ID｜機能名｜説明｜優先度｜受入基準` を埋める。

| ID | 機能名 | 説明 | 優先度 | 受入基準 |
| --- | --- | --- | --- | --- |
| F-01 | ユーザー認証 | メールアドレスを使用したユーザー登録・ログイン・ログアウト | 高 | ・新規登録→メール確認→ログイン成功・ログイン情報が保持される・ログアウトでセッションが破棄される |
| F-02 | 地図表示 | ユーザーの現在位置を中心とした地図表示とSoundPin（音声ピン）の可視化 | 高 | ・現在地が±10m以内で表示される・ピンの表示位置が実際の位置と一致する・ズーム・パン操作がスムーズに動作する |
| F-03 | 距離フィルター | 現在地からの距離に応じてタップ可能なピンを制限・表示 | 中 | ・設定距離（例：10m以内）のピンのみタップ可能になる・距離フィルタON/OFFで表示が切り替わる |
| F-04 | SoundPin投稿 | 位置情報と録音した音声、タイトル・説明文（最大100文字）を組み合わせた投稿 | 高 | ・録音開始/停止が正常に動作する・タイトル・説明文の入力制限（100文字以内）が効く・投稿後マップ上に即時ピンが追加される |
| F-05 | 音声再生 | 投稿された音声の再生・一時停止・再開、シークバー操作 | 高 | ・再生・一時停止の応答が1秒以内・シークバーをドラッグで任意位置にジャンプ可能・音声の終了イベントを正しく検知 |
| F-06 | レイヤー作成・管理 | レイヤー（テーマ）を作成、名前・説明（最大200文字）・画像・公開/非公開設定 | 中 | ・新規レイヤー作成フォームが開く・名前/説明/画像の編集が保存される・公開/非公開切り替えで他ユーザーへの見え方が変わる |
| F-07 | レイヤー選択 | 表示するレイヤーを複数選択し、選択中の投稿のみを地図上にフィルタリング表示 | 中 | ・チェックONのレイヤー投稿のみ表示される・選択中レイヤー名がUI上に明示される・選択リストはスクロール可能 |
| F-08 | いいね | 投稿への「いいね」追加/解除、いいね数表示 | 中 | ・いいねボタン押下で数値が±1される・自分のいいね状態が色やアイコンで判別可能・ページ再読み込み後も状態が維持される |
| F-09 | コメント | 投稿へのコメント投稿・一覧表示 | 中 | ・コメント送信→即時リストに追加・時系列（古→新）で表示・コメント数インジケーターが更新される |
| F-10 | コメントへのいいね | コメント単位での「いいね」追加/解除、いいね数表示 | 低 | ・コメントごとにいいね可能・いいね数が正確に表示される・自分のいいね状態が保持される |
| F-11 | 詳細カードビュー | ピンタップ時に投稿者/日時/タイトル/テキスト/いいね数/コメント数/音声再生コントロールを表示 | 高 | ・カード開閉アニメーションがスムーズ・全項目が正しく表示される・音声再生OK |
| F-12 | 現在地再センタリング | ボタン押下で地図を現在地中心に戻す | 中 | ・ワンタップで現在地にジャンプ・地図移動後でも機能 |
| F-13 | アカウント設定 | プロフィール（表示名、アイコン、自己紹介）の編集 | 中 | ・編集後「保存」で反映・未入力チェック・文字数制限（自己紹介200文字） |
| F-14 | お気に入りレイヤー | レイヤーのお気に入り登録/解除、登録済みレイヤーの一覧アクセス | 低 | ・☆ボタンで登録/解除・お気に入りのみタブ表示できる |
| F-15 | レイヤーカテゴリ | レイヤーをカテゴリーで分類し、カテゴリーごとの絞り込み | 低 | ・複数カテゴリー選択OK・カテゴリー欄でフィルタ適用 |
| F-16 | 投稿編集・削除 | 自分の投稿に対してタイトル/説明/音声の再編集、または投稿の削除 | 中 | ・編集画面から保存→マップと一覧に即時反映・削除確認モーダル後、ピンが消える |
| F-17 | 通報 | 不適切な投稿・コメントを選択し、通報理由を選んで送信 | 低 | ・通報理由フォームが動作・送信後サンクスメッセージ表示 |
| F-18 | スプラッシュ画面 | アプリ起動時のロゴ表示と初期読み込み | 低 | ・起動後2秒以内にホーム画面へ遷移・読み込み中インジケーター |
| F-19 | ナビゲーションバー | 画面下部のタブで主要機能（地図、投稿、レイヤー、通知、設定）に遷移 | 高 | ・各アイコンが正しく画面切り替え・選択中アイコンがハイライト |
| F-20 | 音声編集 | 録音後の再生確認・再録音、開始位置トリミング | 中 | ・再録音→プレビューOK・トリミングつまみで開始位置変更 |
| F-21 | フォロー/アンフォロー | 他ユーザーをフォローまたはアンフォローし、タイムラインに表示 | 中 | ・フォローボタンで状態切替・フォロー中ユーザーの新着投稿が通知/タイムラインに表示 |
| F-22 | フォロー一覧 | 自分がフォローしているユーザー一覧を表示 | 低 | ・プロフィール画面で一覧取得・アンフォロー操作可能 |
| F-23 | プッシュ通知 | いいね・コメント・新着投稿など重要イベントをプッシュ通知 | 中 | ・各種アクションで端末に通知到達・タップで該当画面に遷移 |
| F-24 | 通知設定 | プッシュ通知のON/OFF、対象イベント選択 | 低 | ・設定画面で各通知トグルON/OFF・変更が即時反映 |
| F-25 | SNSシェア | 外部SNS（Twitter, Facebook等）へ投稿リンクをシェア | 低 | ・ネイティブシェアシートが開く・選択SNSに正しいURL送信 |
| F-26 | 検索機能 | タイトル・説明・タグに対する全文検索 | 中 | ・検索キーワード入力→即時候補表示・結果が正しくフィルタ適用 |
| F-27 | タグ付け/タグフィルタ | 投稿にタグを付与し、タグ一覧から絞り込み | 低 | ・複数タグ選択OK・タグクラウドで人気タグ表示 |
| F-28 | オフラインキャッシュ | 一度閲覧した投稿/地図データを端末にキャッシュし、ネット不通時にも閲覧可能 | 中 | ・ネット切断→閲覧済みピンと音声が再生可能・再接続後自動同期 |
| F-29 | 無限スクロール／ページング | 投稿一覧やコメント一覧でスクロール時に自動読み込み | 低 | ・下端到達で次ページロード・ローディングインジケーター表示 |
| F-30 | アプリ設定画面 | 言語選択、テーマ（ダーク/ライト）、プライバシーポリシー表示 | 低 | ・設定項目がリスト表示・変更が即時適用 |
| F-31 | ヘルプ／お問い合わせ | FAQ表示、お問い合わせフォームまたは外部リンク | 低 | ・FAQ項目が表示・問い合わせ送信→確認メッセージ |

---

## 8. 非機能要件

### **パフォーマンス要件**

**レスポンス時間**
- 地図表示・移動操作：100ms以内
- 音声ピン一覧取得API：300ms以内  
- 音声再生開始：500ms以内
- ユーザー認証：1秒以内
- 音声アップロード（5MB）：10秒以内

**スループット**
- 同時接続ユーザー数：1,000人以上
- 音声ピン投稿：100件/分以上
- 音声再生：500回/分以上

**リソース効率**
- アプリサイズ：200MB以下
- メモリ使用量：150MB以下（iOS）、200MB以下（Android）
- 音声ファイル圧縮率：元サイズの70%以下

### **可用性・信頼性要件**

**稼働率**
- サービス稼働率：99.5%以上
- Supabase API稼働率：99.9%以上（SLA準拠）

**災害対策**
- データバックアップ：日次自動実行
- 音声ファイル冗長化：Supabaseストレージの自動冗長化機能を利用

**エラー処理**
- ネットワークエラー時の自動リトライ：3回まで
- オフライン時の操作キューイング
- 音声アップロード失敗時の一時保存・再送機能

### **セキュリティ要件**

**認証・認可**
- Supabase JWT認証による安全な認証
- Row Level Security (RLS)によるデータアクセス制御
- セッション管理：AsyncStorageでの暗号化保存

**データ保護**
- 音声ファイルアップロード時の形式・サイズ検証
- ユーザー入力のサニタイゼーション
- 位置情報の適切な匿名化

**プライバシー**
- 位置情報の精度制御（10m単位での丸め）
- ユーザーによる詳細なプライバシー設定
- GDPR準拠のデータ削除機能

### **ユーザビリティ要件**

**アクセシビリティ**
- VoiceOver（iOS）、TalkBack（Android）対応
- コントラスト比：4.5:1以上
- フォントサイズ調整対応

**多言語対応**
- 初期対応言語：日本語、英語
- 将来的な多言語展開への対応準備

**オフライン対応**
- 一度閲覧した音声ピンのオフライン再生
- 録音機能のオフライン利用
- ネットワーク復旧時の自動同期

### **アーキテクチャ要件（Clean Architecture対応）**

**設計原則**
- 依存性の逆転：Domain層がData層に依存しない設計
- 単一責任の原則：各モジュールの責任を明確に分離
- フィーチャーベース構成：機能ごとの独立性確保

**技術的制約**
- TypeScript：strict mode有効
- ESLint：厳格なコーディング規約適用
- テストカバレッジ：80%以上（ドメイン層は90%以上）

**拡張性**
- 新機能追加時のClean Architecture適用
- 他機能への影響を最小化する設計
- マイクロサービス化への対応準備

### **運用・保守要件**

**ログ・監視**
- アプリクラッシュレート：1%以下
- API応答時間の継続監視
- 音声再生成功率：99%以上

**更新・デプロイ**
- Expo OTAアップデート対応
- 段階的ロールアウト機能
- ロールバック機能の整備

---

## 9. 外部インターフェース要件

- **なぜ必要か**・**何を書くか**・**どのように書くか**
    - **なぜ必要か**：外部APIやサービス連携の仕様を明確化し、開発・テスト時の齟齬をなくすため。
    - **何を書くか**：使用する外部サービス名、バージョン、エンドポイント仕様、認証方法。
    - **どのように書くか**：表形式や箇条書きで「サービス名｜仕様概要｜備考」を整理。

2025年7月3日現在のアプリコードから抽出したもの

## **外部インターフェース要件**

プロジェクトのコードを分析した結果、以下の外部インターフェース要件をまとめました。

**1. Supabase**

| **サービス名** | **仕様概要** | **備考** |
| --- | --- | --- |
| **Supabase Auth** | - バージョン: @supabase/supabase-js v2.50.2- 認証方法: API Key認証- エンドポイント: 環境変数から取得 | - 認証機能（サインアップ、サインイン、サインアウト）- セッション管理- ユーザー情報取得 |
| **Supabase Database** | - バージョン: @supabase/supabase-js v2.50.2- 認証方法: API Key認証- エンドポイント: 環境変数から取得 | - データ永続化- リアルタイムデータ同期 |

**2. 位置情報サービス**

| **サービス名** | **仕様概要** | **備考** |
| --- | --- | --- |
| **Expo Location** | - バージョン: expo-location v18.1.6- 認証方法: アプリ権限- API: Expo SDK | - デバイスの位置情報取得- 位置情報の監視 |
| **React Native Maps** | - バージョン: react-native-maps v1.20.1- 認証方法: なし | - マップ表示コンポーネント |
| **Google Maps API** | - 認証方法: API Key認証- エンドポイント: Google Maps Platform- キー: 環境変数から取得 | - Android専用- iOS では Apple Maps を使用 |

**3. メディア関連**

| **サービス名** | **仕様概要** | **備考** |
| --- | --- | --- |
| **React Native Track Player** | - バージョン: react-native-track-player v4.1.1- 認証方法: なし- API: ネイティブモジュール | - オーディオ再生機能- バックグラウンド再生対応 |

**4. ストレージ**

| **サービス名** | **仕様概要** | **備考** |
| --- | --- | --- |
| **Async Storage** | - バージョン: @react-native-async-storage/async-storage v2.1.2- 認証方法: なし- API: ネイティブモジュール | - ローカルデータ保存- キーバリュー形式 |

**5. その他の外部インターフェース**

| **サービス名** | **仕様概要** | **備考** |
| --- | --- | --- |
| **Expo WebBrowser** | - バージョン: expo-web-browser v14.2.0- 認証方法: なし | - アプリ内ブラウザ表示 |
| **Expo Linking** | - バージョン: expo-linking v7.1.6- 認証方法: なし | - ディープリンク処理- 外部アプリ起動 |
| **React Native WebView** | - バージョン: react-native-webview v13.13.5- 認証方法: なし | - Web コンテンツ表示 |

**環境変数要件**

```python
SUPABASE_URL=<Supabase プロジェクト URL>
SUPABASE_ANON_KEY=<Supabase 匿名認証キー>
EXPO_PUBLIC_GOOGLE_MAPS_API_KEY=<Google Maps API キー（Android用）>
```

以上が現在のプロジェクトで使用されている外部インターフェースの要件です。これらの情報は開発・テスト時の齟齬をなくし、連携仕様を明確化するために重要です。

---

## 10. データモデル

- **なぜ必要か**・**何を書くか**・**どのように書くか**
    - **なぜ必要か**：データ構造をチーム全員で共通理解し、データベース設計やマイグレーションをスムーズにするため。
    - **何を書くか**：主要エンティティ（テーブル）名、カラム名／型／制約、ER図。
    - **どのように書くか**：ER図を図版で示し、別途表で各テーブルのカラム詳細を記載。

---

## 11. 制約・前提条件・リスク

- **なぜ必要か**・**何を書くか**・**どのように書くか**
    - **なぜ必要か**：開発の制約事項や想定すべきリスクを共有し、計画立案や対策検討を容易にするため。
    - **何を書くか**：前提条件、技術的／運用的制約、リスク項目と影響度・対策案。
    - **どのように書くか**：箇条書きで「前提：…」「制約：…」「リスク：…（影響・対策）」の形式。
- **前提**：ユーザーが端末の位置情報を ON にする
- **制約**：無料プラン時

---

## 12. 受入基準・テスト計画

- **なぜ必要か**・**何を書くか**・**どのように書くか**
    - **なぜ必要か**：どの範囲をどうテストし、いつ“合格”とみなすかを明確にして品質を担保するため。
    - **何を書くか**：各機能の受入基準一覧、テストタイプ（ユニット／E2E／ユーザーテスト）、スケジュール。
    - **どのように書くか**：
        1. 受入基準は機能要件のACを再掲
        2. テスト計画は種類ごとに範囲・担当・期限を表形式でまとめる
- **テスト戦略**：テスト駆動開発