# SoundZone - プロジェクト概要

## 📱 アプリケーション概要

**SoundZone**は位置情報ベースの音声SNSアプリケーションです。ユーザーは特定の地理的な場所に音声コンテンツを「ピン」として投稿し、その場所を訪れた他のユーザーがその音声を発見・再生できるプラットフォームです。

### 🎯 コンセプト
- **場所とストーリーの融合**: 特定の場所に音声ストーリーやレビューを紐づけ
- **音声による体験共有**: その場所での体験や思い出を音声で共有
- **位置情報ベースの発見**: 実際にその場所を訪れることで新しい音声コンテンツを発見

## 🏗️ アーキテクチャ概要

### 技術スタック
- **フロントエンド**: React Native 0.79.4 + Expo SDK ~53.0.15
- **言語**: TypeScript
- **バックエンド**: Supabase (認証・データベース・ストレージ)
- **地図**: react-native-maps (iOS: Apple Maps, Android: Google Maps)
- **音声**: react-native-track-player
- **ナビゲーション**: @react-navigation v7

### アーキテクチャパターン
- **フィーチャーベース構成**: 機能ごとにフォルダを分離
- **クリーンアーキテクチャ**: 認証機能でDomain-Data-Presentation層を実装
- **Context + Hooks**: グローバル状態管理
- **コンポーネント設計**: 再利用可能なUIコンポーネント

## 📁 プロジェクト構造

```
soundzone/
├── src/
│   ├── features/              # 機能別モジュール
│   │   ├── auth/             # 認証システム（クリーンアーキテクチャ）
│   │   │   ├── domain/       # エンティティ、ユースケース、リポジトリ
│   │   │   ├── data/         # データソース、リポジトリ実装
│   │   │   └── presentation/ # UI、Context、Hooks
│   │   ├── home/            # メイン地図画面
│   │   ├── recording/       # 音声録音機能
│   │   ├── mypin/          # ユーザーの投稿管理
│   │   ├── layers/         # レイヤー管理
│   │   └── account/        # アカウント設定
│   ├── navigation/          # ナビゲーション構成
│   ├── shared/             # 共通サービス・ユーティリティ
│   └── types/              # TypeScript型定義
├── components/             # 共通UIコンポーネント
├── assets/                # 静的ファイル（音声、画像、フォント）
├── docs/                  # プロジェクトドキュメント
└── ios/android/           # プラットフォーム固有設定
```

## 🎵 実装済み機能

### ✅ 認証システム (80%完了)
- **ユーザー登録・ログイン**: Supabaseを使用した認証
- **セッション管理**: AsyncStorageによる永続化
- **クリーンアーキテクチャ**: Domain層でビジネスロジックを分離
- **型安全性**: Email, Passwordのバリューオブジェクト実装

**実装場所**: `src/features/auth/`

### ✅ 地図表示システム (70%完了)
- **位置情報取得**: ユーザーの現在地表示
- **地図表示**: プラットフォーム別マップ（iOS: Apple Maps, Android: Google Maps）
- **音声ピン表示**: 京都エリアに3つの固定ピン配置
- **現在地中央表示**: ボタンによる現在地への移動

**実装場所**: `src/features/home/presentation/HomeScreen.tsx`

### ✅ 音声再生システム (90%完了)
- **高品質音声再生**: react-native-track-playerによる実装
- **モーダルプレイヤー**: スワイプ操作対応の音声プレイヤー
- **再生制御**: 再生/停止、10秒スキップ機能
- **プログレス表示**: リアルタイム再生位置とシーク機能
- **バックグラウンド再生**: アプリがバックグラウンドでも音声継続

**実装場所**: `components/AudioPlayerModal.tsx`, `src/shared/services/trackPlayerSetup.ts`

### ✅ ナビゲーション (100%完了)
- **タブナビゲーション**: 5つのメイン画面
- **認証フロー**: 未認証時のログイン/サインアップ画面
- **スタックナビゲーション**: 画面間の遷移管理

**実装場所**: `src/navigation/`

## 🚧 未実装・部分実装の機能

### ❌ 録音機能 (0%実装)
**現状**: プレースホルダーテキストのみ
**必要な実装**:
- 音声録音の開始/停止/一時停止
- マイク権限の取得
- 音声ファイルの保存・圧縮
- 波形表示UI
- 録音メタデータの管理

### ❌ MyPin管理 (0%実装)
**現状**: プレースホルダー画面
**必要な実装**:
- ユーザーが作成したピンの一覧表示
- ピンの編集・削除機能
- ピンの公開/非公開設定
- 音声ファイルの管理

### ❌ レイヤーシステム (0%実装)
**現状**: プレースホルダー画面
**必要な実装**:
- レイヤーの作成・管理
- レイヤー別のピンフィルタリング
- 協調的なレイヤー機能
- レイヤーの共有・権限管理

### ⚠️ アカウント管理 (20%実装)
**現状**: サインアウト機能のみ
**必要な実装**:
- プロフィール画像のアップロード
- ユーザー名・表示名の編集
- アカウント設定・プライバシー設定
- 利用統計の表示

## 🔧 技術的な課題と改善点

### データベース設計
- **現状**: Supabaseのスキーマ未定義
- **必要**: ピン、録音、レイヤー、ユーザー情報のテーブル設計

### エラーハンドリング
- **現状**: 基本的なエラーハンドリングのみ
- **改善点**: 
  - ネットワークエラーの処理
  - オフラインモード対応
  - リトライ機構の実装

### パフォーマンス
- **現状**: 音声ピンが固定値（3個）
- **改善点**:
  - 動的なピン読み込み
  - 音声ファイルの遅延読み込み
  - 地図表示の最適化

### セキュリティ
- **改善点**:
  - ファイルアップロードの検証
  - 音声コンテンツのモデレーション
  - APIレート制限の実装

## 📊 開発進捗状況

| 機能 | 進捗 | 状態 |
|------|------|------|
| 認証システム | 80% | ✅ 基本機能完了 |
| 地図表示 | 70% | ✅ 表示・位置情報取得完了 |
| 音声再生 | 90% | ✅ 高品質再生完了 |
| ナビゲーション | 100% | ✅ 完了 |
| 録音機能 | 0% | ❌ 未着手 |
| MyPin管理 | 0% | ❌ 未着手 |
| レイヤー機能 | 0% | ❌ 未着手 |
| アカウント管理 | 20% | ⚠️ 部分実装 |

**全体進捗: 約25%**

## 🚀 次期開発優先度

### 🔴 高優先度
1. **データベース設計**: Supabaseのテーブル設計・実装
2. **録音機能**: 音声録音とファイル保存の実装
3. **ピン作成フロー**: 録音からピン投稿までの一連の流れ
4. **基本的なエラーハンドリング**: ネットワークエラー・権限エラーの対応

### 🟡 中優先度
1. **MyPin画面**: ユーザーのピン管理機能
2. **レイヤーシステム**: 基本的なレイヤー機能
3. **プロフィール管理**: アカウント情報の編集
4. **メール認証**: パスワードリセット機能

### 🟢 低優先度
1. **高度な音声機能**: エフェクト、音質設定
2. **ソーシャル機能**: フォロー、いいね機能
3. **パフォーマンス最適化**: キャッシュ、遅延読み込み
4. **テスト実装**: 単体・統合テスト

## 🎯 MVP（最小実行可能製品）への道筋

SoundZoneをMVPレベルまで持っていくには、以下の機能が最低限必要です：

1. **✅ ユーザー認証** - 実装済み
2. **✅ 地図表示と位置情報** - 実装済み  
3. **✅ 音声再生** - 実装済み
4. **❌ 音声録音** - 要実装
5. **❌ ピン作成・投稿** - 要実装
6. **❌ データベース永続化** - 要実装

**MVP達成まで**: 約2-3ヶ月（1人開発者の場合）

## 📞 参考リソース

- **技術文書**: `docs/TIPS.md` - 開発環境の設定とトラブルシューティング
- **変更履歴**: `docs/CHANGELOG.md` - 実装済み機能の詳細
- **Expo Documentation**: https://docs.expo.dev/
- **Supabase Documentation**: https://supabase.com/docs
- **React Navigation**: https://reactnavigation.org/
- **react-native-track-player**: https://react-native-track-player.js.org/